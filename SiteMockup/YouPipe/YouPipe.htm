<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouPipe Upload Studio</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="youpipe.css">
</head>
<body>

    <div class="uploader-container">
        <!-- The header mimics the YouTube logo style -->
        <div class="header">
            <span>You</span><span class="logo-box">Pipe</span>
            <span class="studio-text">Studio</span>
        </div>
        
        <h2>Upload video (5MB Limit)</h2>
        
        <!-- This label triggers the hidden file input -->
        <label for="file-input">
            <div class="upload-box" id="drop-zone">
                <div class="upload-icon">
                    <!-- Simple SVG for upload icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 0 24 24" width="48px" fill="#606060"><path d="M19.35 10.04C18.67 6.6 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>
                </div>
                <div class="upload-text">Drag and drop video files to upload</div>
                <div class="upload-subtext">This tool checks if your file is under the 5MB limit.</div>
                <button type="button" class="upload-button">Select File</button>
            </div>
        </label>
        
        <!-- The actual file input, visually hidden -->
        <input type="file" id="file-input" accept="video/*">
        
        <!-- This section will show the results -->
        <div id="feedback-area">
            <h3>File Analysis Report</h3>
            <!-- Display-only properties -->
            <div class="feedback-item">
                <span>File Name:</span>
                <span id="file-name">...</span>
            </div>
            <div class="feedback-item">
                <span>File Size:</span>
                <span id="file-size">...</span>
            </div>
            <div class="feedback-item">
                <span>File Type:</span>
                <span id="file-type">...</span>
            </div>
            <div class="feedback-item">
                <span>Resolution:</span>
                <span id="file-resolution">...</span>
            </div>
            <div class="feedback-item">
                <span>Duration:</span>
                <span id="file-duration">...</span>
            </div>
             <div class="feedback-item">
                <span>Aspect Ratio:</span>
                <span id="file-aspect">...</span>
            </div>
            <div class="feedback-item">
                <span>Est. Bitrate:</span>
                <span id="file-bitrate">...</span>
            </div>
            
            <hr>
            <!-- Validation Check: Only file size matters -->
            <div class="feedback-item">
                <span>File Size (Max 5MB):</span>
                <span id="status-size" class="status">...</span>
            </div>
        </div>
    </div>

    <!-- Embedded JavaScript -->
    <script>
        // Get all the DOM elements
        const fileInput = document.getElementById('file-input');
        const dropZone = document.getElementById('drop-zone');
        const feedbackArea = document.getElementById('feedback-area');
        
        // File Info Elements
        const elFileName = document.getElementById('file-name');
        const elFileSize = document.getElementById('file-size');
        const elFileType = document.getElementById('file-type');
        const elFileRes = document.getElementById('file-resolution');
        const elFileDuration = document.getElementById('file-duration');
        const elFileAspect = document.getElementById('file-aspect');
        const elFileBitrate = document.getElementById('file-bitrate');
        
        // Status Elements
        const elStatusSize = document.getElementById('status-size');

        // Listen for the user selecting a file
        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                analyseFile(file);
            }
        });

        // --- Drag and Drop Functionality ---
        dropZone.addEventListener('dragover', (event) => {
            event.preventDefault(); 
            dropZone.style.borderColor = '#065fd4'; // YouTube Blue
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.style.borderColor = '#ccc';
        });
        dropZone.addEventListener('drop', (event) => {
            event.preventDefault();
            dropZone.style.borderColor = '#ccc';
            const file = event.dataTransfer.files[0];
            if (file && file.type.startsWith('video/')) {
                fileInput.files = event.dataTransfer.files;
                analyseFile(file);
            } else {
                alert("Please drop a video file.");
            }
        });
        // --- End Drag and Drop ---

        function analyseFile(file) {
            // Define the size limit
            const MAX_FILE_SIZE_BYTES = 5 * 1024 * 1024; // 5MB

            // Make the feedback area visible
            feedbackArea.style.display = 'block';

            // 1. Check File Name, Size, and Type
            elFileName.textContent = file.name;
            const fileSizeMB = (file.size / 1024 / 1024).toFixed(2);
            elFileSize.textContent = `${fileSizeMB} MB`;
            
            const fileExtension = file.name.split('.').pop().toLowerCase();
            elFileType.textContent = fileExtension.toUpperCase();

            // 2. Perform the *only* validation: File Size
            if (file.size <= MAX_FILE_SIZE_BYTES) {
                elStatusSize.textContent = 'Valid';
                elStatusSize.className = 'status success';
            } else {
                elStatusSize.textContent = 'Error: File exceeds 5MB';
                elStatusSize.className = 'status error';
            }

            // 3. Get and display other metadata (for information only)
            const video = document.createElement('video');
            video.preload = 'metadata';
            const objectURL = URL.createObjectURL(file);
            video.src = objectURL;

            video.onloadedmetadata = () => {
                // Get video properties
                const width = video.videoWidth;
                const height = video.videoHeight;
                const duration = video.duration;
                
                // Calculate aspect ratio and bitrate
                const aspectRatio = width / height;
                const bitrateMbps = (file.size * 8) / (duration * 1000000);

                // Display info
                elFileRes.textContent = `${width}px x ${height}px`;
                elFileDuration.textContent = `${duration.toFixed(2)} seconds`;
                elFileAspect.textContent = `${aspectRatio.toFixed(2)}:1`;
(height === 0 ? '' : ` (e.g., 1.77 is 16:9)`);
                elFileBitrate.textContent = `${bitrateMbps.toFixed(2)} Mbps`;

                // Clean up the temporary URL
                URL.revokeObjectURL(objectURL);
            };
            
            video.onerror = () => {
                elFileRes.textContent = 'N/A (Cannot read video)';
                elFileDuration.textContent = 'N/A';
                elFileAspect.textContent = 'N/A';
                elFileBitrate.textContent = 'N/A';
                URL.revokeObjectURL(objectURL); // Clean up
            };
        }
    </script>

</body>
</html>